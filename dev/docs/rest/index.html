---
layout: page
pretitle: Development Centre
title: "Kraken REST API Reference"
---
<div class="container">
  <div class="row">
    <div class="col-md-3" id="sidenav">
      <nav class="docs-sidebar" data-spy="affix" data-offset-top="275">
        <ul class="nav nav-stacked fixed">
          <li>
            <a href="#authentication">Authentication</a>
            <ul class="nav nav-stacked">
              <li><a href="#about-kraken-auth">About Kraken Authentication</a></li>
              <li><a href="#generate-token">Generate Token</a></li>
              <li><a href="#generate-refresh-token">Generate Refresh Token</a></li>
              <li><a href="#get-api-keys">Get API Keys</a></li>
              <li><a href="#generate-api-key">Generate API Key</a></li>
              <li><a href="#revoke-api-key">Revoke API Key</a></li>
            </ul>
          </li>
          <li>
            <a href="#messaging">Messaging, Records and Jobs</a>
            <ul class="nav nav-stacked">
              <li><a href="#messages">Messages</a></li>
              <li><a href="#purges">Record Purges</a></li>
              <li><a href="#pushes">Record Pushes</a></li>
              <li><a href="#jobs">Background Jobs</a></li>
            </ul>
          </li>
          <li>
            <a href="#applications">Applications</a>
            <ul class="nav nav-stacked">
              <li><a href="#list-applications">List Applications</a></li>
              <li><a href="#get-application-details">Get Application Details</a></li>
              <li><a href="#modify-application">Modify Application</a></li>
              <li><a href="#get-application-logo">Get Application Logo</a></li>
            </ul>
          </li>
          <li>
            <a href="#backups">Backups</a>
            <ul class="nav nav-stacked">
              <li><a href="#list-backups">List Backups</a></li>
              <li><a href="#get-backup-details">Get Backup Details</a></li>
              <li><a href="#create-backup">Create Backup</a></li>
              <li><a href="#restore-backup">Restore Backup</a></li>
              <li><a href="#delete-backup">Delete Backup</a></li>
            </ul>
          </li>
          <li>
            <a href="#certificates">Certificates</a>
            <ul class="nav nav-stacked">
              <li><a href="#list-certificates">List Certificates</a></li>
              <li><a href="#get-certificate-details">Get Certificate Details</a></li>
              <li><a href="#generate-certificate">Generate Certificate</a></li>
              <li><a href="#upload-certificate">Upload Certificate</a></li>
              <li><a href="#assign-certificate">Assign Certificate</a></li>
              <li><a href="#delete-certificate">Delete Certificate</a></li>
              <li><a href="#list-certificate-authorities">List Certificate Authorities</a></li>
              <li><a href="#get-certificate-authority-details">Get Certificate Authority Details</a></li>
              <li><a href="#download-certificate-authority">Download Certificate Authority</a></li>
              <li><a href="#delete-certificate-authority">Delete Certificate Authority</a></li>
            </ul>
          </li>
          <li>
            <a href="#configuration">Configuration</a>
            <ul class="nav nav-stacked">
              <li><a href="#get-arkos-configuration">Get arkOS Configuration</a></li>
              <li><a href="#update-arkos-configuration">Update arkOS Configuration</a></li>
              <li><a href="#patch-arkos-configuration">Patch arkOS Configuration</a></li>
              <li><a href="#get-arkos-system-time">Get arkOS System Time</a></li>
              <li><a href="#update-arkos-system-time">Update arkOS System Time</a></li>
              <li><a href="#shutdown-system">Shutdown System</a></li>
              <li><a href="#reboot-system">Reboot System</a></li>
            </ul>
          </li>
          <li>
            <a href="#databases">Databases</a>
            <ul class="nav nav-stacked">
              <li><a href="#get-databases">Get Databases</a></li>
              <li><a href="#get-database-details">Get Database Details</a></li>
              <li><a href="#create-database">Create Database</a></li>
              <li><a href="#execute-sql-on-database">Execute SQL on Database</a></li>
              <li><a href="#download-database">Download Database</a></li>
              <li><a href="#delete-database">Delete Database</a></li>
              <li><a href="#get-database-users">Get Database Users</a></li>
              <li><a href="#get-database-user-details">Get Database User Details</a></li>
              <li><a href="#create-database-user">Create Database User</a></li>
              <li><a href="#change-database-user-permissions">Change Database User Permissions</a></li>
              <li><a href="#delete-database-user">Delete Database User</a></li>
              <li><a href="#get-database-types">Get Database Types</a></li>
            </ul>
          </li>
          <li>
            <a href="#file-manager">File Manager</a>
            <ul class="nav nav-stacked">
              <li><a href="#list-files-and-folders">List Files and Folders</a></li>
              <li><a href="#get-file-details">Get File/Folder Details</a></li>
              <li><a href="#create-file">Create File or Folder</a></li>
              <li><a href="#upload-file">Upload File</a></li>
              <li><a href="#manage-file">Manage File</a></li>
              <li><a href="#delete-file">Delete File</a></li>
              <li><a href="#get-fileshare-links">Get Fileshare Links</a></li>
              <li><a href="#get-fileshare-link-details">Get Fileshare Link Details</a></li>
              <li><a href="#create-fileshare-link">Create Fileshare Link</a></li>
              <li><a href="#download-shared-file">Download Shared File</a></li>
              <li><a href="#update-fileshare-link">Update Fileshare Link</a></li>
              <li><a href="#remove-fileshare-link">Remove Fileshare Link</a></li>
            </ul>
          </li>
          <li>
            <a href="#filesystems">Filesystems</a>
            <ul class="nav nav-stacked">
              <li><a href="#get-filesystems">Get Filesystems</a></li>
              <li><a href="#get-filesystem-details">Get Filesystem Details</a></li>
              <li><a href="#create-virtual-disk">Create Virtual Disk</a></li>
              <li><a href="#filesystem-operations">Filesystem Operations</a></li>
              <li><a href="#delete-virtual-disk">Delete Virtual Disk</a></li>
              <li><a href="#get-points-of-interest">Get Points of Interest</a></li>
            </ul>
          </li>
          <li>
            <a href="#networks">Networks</a>
            <ul class="nav nav-stacked">
              <li><a href="#get-networks">Get Networks</a></li>
              <li><a href="#get-network-details">Get Network Details</a></li>
              <li><a href="#add-network">Add Network</a></li>
              <li><a href="#network-operations">Network Operations</a></li>
              <li><a href="#delete-network">Delete Network</a></li>
              <li><a href="#get-network-interfaces">Get Network Interfaces</a></li>
              <li><a href="#get-network-interface-details">Get Network Interface Details</a></li>
            </ul>
          </li>
          <li>
            <a href="#packages">System Packages</a>
            <ul class="nav nav-stacked">
              <li><a href="#get-packages">Get Packages</a></li>
              <li><a href="#get-package-details">Get Package Details</a></li>
              <li><a href="#package-operations">Package Operations</a></li>
            </ul>
          </li>
          <li>
            <a href="#roles">Roles</a>
            <ul class="nav nav-stacked">
              <li><a href="#get-users">Get Users</a></li>
              <li><a href="#get-user-details">Get User Details</a></li>
              <li><a href="#add-user">Add User</a></li>
              <li><a href="#update-user">Update User</a></li>
              <li><a href="#delete-user">Delete User</a></li>
              <li><a href="#get-groups">Get Groups</a></li>
              <li><a href="#get-group-details">Get Group Details</a></li>
              <li><a href="#add-group">Add Group</a></li>
              <li><a href="#update-group">Update Group</a></li>
              <li><a href="#delete-group">Delete Group</a></li>
              <li><a href="#get-domains">Get Domains</a></li>
              <li><a href="#get-domain-details">Get Domain Details</a></li>
              <li><a href="#add-domain">Add Domain</a></li>
              <li><a href="#delete-domain">Delete Domain</a></li>
            </ul>
          </li>
          <li>
            <a href="#security">Security</a>
            <ul class="nav nav-stacked">
              <li><a href="#get-policies">Get Policies</a></li>
              <li><a href="#get-policy-details">Get Policy Details</a></li>
              <li><a href="#update-policy">Update Policy</a></li>
            </ul>
          </li>
          <li>
            <a href="#services">System Services</a>
            <ul class="nav nav-stacked">
              <li><a href="#get-services">Get Services</a></li>
              <li><a href="#get-service-details">Get Service Details</a></li>
              <li><a href="#create-service">Create Service</a></li>
              <li><a href="#manage-service">Manage Service</a></li>
              <li><a href="#delete-service">Delete Service</a></li>
            </ul>
          </li>
          <li>
            <a href="#updates">Updates</a>
            <ul class="nav nav-stacked">
              <li><a href="#get-updates">Get Updates</a></li>
              <li><a href="#get-update-details">Get Update Details</a></li>
              <li><a href="#apply-updates">Apply Updates</a></li>
            </ul>
          </li>
          <li>
            <a href="#websites">Websites</a>
            <ul class="nav nav-stacked">
              <li><a href="#get-websites">Get Websites</a></li>
              <li><a href="#get-website-details">Get Website Details</a></li>
              <li><a href="#create-website">Create Website</a></li>
              <li><a href="#manage-website">Manage Website</a></li>
              <li><a href="#perform-website-action">Perform Website Action</a></li>
              <li><a href="#remove-website">Remove Website</a></li>
            </ul>
          </li>
        </ul>
        <a href="#top" class="back-to-top">Back to Top</a>
      </nav>
    </div>
    <div id="content" class="col-md-9">
      <h1 id="authentication" class="page-header">Authentication</h1>

      <div class="api-item">
        <h2 id="about-kraken-auth">About Kraken Authentication</h2>
        <p class="lead">Before you can work with the Kraken REST API, you must have the proper authorization to do so.</p>
        <p>Kraken gives out two different forms of authorization credentials: tokens (specifically JSON Web Tokens (JWT)) or API keys.</p>
        <p>Tokens are ephemeral and designed to be used for one-off sessions, expiring one hour after being issued. This time can be extended without requiring a new login by using the token to generate a refresh token sometime before it expires.</p>
        <p>API keys are designed for permanent use in connected applications, such as in mobile apps and web services. They can be generated via the API (using an initial token) and revoked at any time by the user.</p>
        <h4>Using Tokens</h4>
        <p>To authenticate with a standard token, <span class="text-success">POST</span> <code>/api/token</code> with the <code>username</code> and <code>password</code> keys filled out in the submitted object. Provided the credentials are correct, the server will respond with an object containing a <code>token</code> key to use. This token is submitted in all future requests to the server in the <code>Authorization</code> HTTP header, like follows:</p>
        <code>Authorization: Bearer &lt;token-goes-here&gt;</code>
        <p>The token contains a base64-encoded JSON object with information about the currently logged-in user. To access this information, split the token at <code>.</code> and decode the middle section as base64. The resulting object will have the following keys:</p>
        <ul>
          <li><code>uid</code> the username</li>
          <li><code>ufn</code> the user's first name or pseudonym</li>
          <li><code>uln</code> the user's last name (if provided)</li>
          <li><code>iat</code> epoch timestamp of the time when the token was generated</li>
          <li><code>exp</code> epoch timestamp of the time when the token will expire</li>
        </ul>
        <p>Refresh tokens can be generated with a prior token, as long as that prior token has not yet expired. This will allow sessions to last longer than the default expiry time of one hour. To generate, <span class="text-success">POST</span> <code>/api/token/refresh</code> with the <code>token</code> key filled out in the submitted object. A new token will be returned and this token can be used in the place of the original one for future requests (for another hour, at which point a new refresh token would need to be created).</p>
        <p>Note that, if anonymous user capability is enabled in Kraken, tokens must still be generated for requests, but the submitted <code>username</code> and <code>password</code> can be set to anything (or blank) and a token will still be returned for use. Also note that it is advisable to submit a refresh token request at least a couple of minutes before the original token's expiration, to account for time drift between the client and server.</p>
        <h4>Using API Keys</h4>
        <p>To authenticate with an API key, use it as the <code>X-API-Key</code> HTTP header in every request.</p>
        <p>To generate an API key from the API itself, first follow the steps above for logging in to obtain a standard token. Then use this token with a request to <span class="text-success">POST</span> <code>/api/api_keys</code>. This request must have an object with the <code>user</code> key, corresponding to the username to which this key should be associated (remember you can get this from the <code>uid</code> key of the base64-decoded JWT).</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="generate-token">Generate Token</h2>
        <h3><span class="text-success">POST</span> /api/token</h3>
        <p class="lead">Return a JSON Web Token (JWT) to authorize requests to the API, for a period of one hour.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -X POST <url>/api/token --data '{"username": "testuser", "password": "xxxxxxxx"}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <dl>
            <dt>username</dt>
            <dd>The username of the user to authenticate as.</dd>
            <dt>password</dt>
            <dd>The password of the aforementioned user.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>HTTP 200 with a <code>token</code> key to use in future requests, or HTTP 401 with a <code>message</code> key explaining why the token couldn't be issued.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="generate-refresh-token">Generate Refresh Token</h2>
        <h3><span class="text-success">POST</span> /api/token/refresh</h3>
        <p class="lead">Generate a new JSON Web Token to use with requests, without requiring the user to re-enter their username or password.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -X POST <url>/api/token --data '{"token": "xxxxxxxx"}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <dl>
            <dt>token</dt>
            <dd>The valid token obtained prior.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>HTTP 200 with a <code>token</code> key to use in future requests, or HTTP 401 with a <code>message</code> key explaining why the token couldn't be issued.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-api-keys">Get API Keys</h2>
        <h3><span class="text-success">GET</span> /api/api_keys</h3>
        <p class="lead">Returns a list of API keys created for use with Kraken, and their associated users.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/api_keys
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of API key detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
    "api_keys": [
        {
            "user": "testuser",
            "key": "xxxxxxxx",
        },
        {
            "id": "testusertwo",
            "name": "xxxxxxxx",
        }
    ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="generate-api-key">Generate API Key</h2>
        <h3><span class="text-success">POST</span> /api/api_keys</h3>
        <p class="lead">Return a permanent API key to use with applications or services.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X POST <url>/api/api_keys --data '{"user": "testuser"}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <dl>
            <dt>user</dt>
            <dd>The username of the user to associate with this key.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>An object with <code>user</code> and <code>key</code> keys, corresponding to the newly-generated key.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="revoke-api-key">Revoke API Key</h2>
        <h3><span class="text-success">DELETE</span> /api/api_keys/:key</h3>
        <p class="lead">Revokes an existing API key, preventing it from being used to authorize future requests.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>key</dt>
            <dd>API key to revoke.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X DELETE <url>/api/api_keys/xxxxxxxx
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>HTTP 204.</p>
      </div>
      <hr />
      <br />

      <h1 id="authentication" class="page-header">Authentication</h1>

      <div class="api-item">
        <h2 id="messages">Messages</h2>
        <p class="lead">Messages allow you to determine the state of running or recently completed operations.</p>
        <p>arkOS has many operations that must run in background threads, so that the state of the webserver is interrupted and to allow it to continue to respond to requests. Many requests simply pass messages to the client by adding a <code>message</code> key to the response object, but that is not sufficient for threaded or long-running operations. This means a separate endpoint at <code>/api/genesis</code> exists to track messages and other information delivered in parallel.</p>
        <p><span class="text-success">GET</span> <code>/api/genesis</code> returns an object with three keys, one of them being <code>messages</code>. This endpoint is designed to be fetched every few seconds, to allow for pseudo-realtime display of system status in your application. <code>messages</code> is a list with objects. When a message is available, it looks like this:</p>
        {% highlight json %}
{
  "class": "info",
  "complete": false,
  "headline": null,
  "id": "34853c64c3",
  "message": "Please wait..."
}
        {% endhighlight %}
        <p>Here is a brief rundown of the significance of these keys:</p>
        <ul>
          <li><code>id</code> : This is a random string that can be tracked for the life of the message object. That means if more messages are delivered in relation to this message in the future (i.e. given with the same ID), they can supersede the display of this message.</li>
          <li><code>headline</code> : The title of the message.</li>
          <li><code>message</code> : The actual text of the message.</li>
          <li><code>class</code> : The class of the message. One of <code>info</code>, <code>success</code>, <code>warn</code> or <code>error</code>. Helps for associating the message with an appropriate visual display></li>
          <li><code>complete</code> : True if this is the last message you will find associated with this ID. In Genesis, this is the point when the message will start to automatically disappear.</li>
        </ul>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="purges">Record Purges</h2>
        <p class="lead">Record purges inform your client of records that no longer exist.</p>
        <p>If your client application caches the information returned from <span class="text-success">GET</span> calls to Kraken endpoints, and a record is removed from the system by an action initiated directly from the server, your client will not know this unless it rescans the endpoint of the model in question. This can be done automatically in the background by periodically tracking the <code>purges</code> key of <span class="text-success">GET</span> <code>/api/genesis</code>. When an object appears in this list, use the <code>model</code> key to associate the record type to remove, and the <code>id</code> to remove the specific object that no longer exists.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="purges">Record Pushes</h2>
        <p class="lead">Record pushes inform your client of records that were created serverside.</p>
        <p>In the same way, if your client application caches the information returned from <span class="text-success">GET</span> calls to Kraken endpoints, and a record is created by an action initiated directly from the server, your client will not know this unless it rescans the endpoint of the model in question. This can also be done automatically in the background by periodically tracking the <code>pushes</code> key of <span class="text-success">GET</span> <code>/api/genesis</code>. A typical <code>pushes</code> key can look like this within the greater object:</p>
        {% highlight json %}
{
  "messages": [],
  "purges": [],
  "pushes": {
    "website": [
      {
        "addr": "localhost",
        "certificate": null,
        "database": null,
        "enabled": true,
        "has_actions": null,
        "id": "testsite",
        "is_ready": true,
        "path": "/srv/http/webapps/testsite",
        "php": false,
        "port": 80,
        "site_icon": "fa fa-globe",
        "site_name": "Basic Website",
        "site_type": "basicsite",
        "version": null
      }
    ]
  }
}
        {% endhighlight %}
        <p>Here the website I added from a previous call to <span class="text-success">POST</span> <code>/api/websites</code> has completed, and the record is ready to be added to the system. It is keyed to the <code>pushes</code> object by the name of the record type itself. A <code>pushes</code> object can have multiple record types per call, in turn with multiple records matching each type.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="jobs">Background Jobs</h2>
        <p class="lead">Background job tracking provides an alternate way aside from messages to manage system operations.</p>
        <p>When you request that arkOS perform a long-running operation, such as installing an application or creating a new website, this original call will likely come back with an HTTP 202 response. This response will include a <code>Location</code> header, specifying an endpoint on the API to track, something like <code>/api/jobs/b82eceb0b8</code>. Making a periodic <span class="text-success">GET</span> call to this address will inform you of the background job's status at any given point in time. The endpoint will return an object with <code>status</code> key being one of 200 (the job is currently running), 400 (the job failed because of a request error), 500 (the job failed because of a server exception), or the job's specific success code (by default 201). The job endpoint will expire 43200 seconds (12 hours) after the job has exited. The base <code>/api/jobs</code> endpoint should also provide you a list of all background jobs currently being run.</p>
      </div>
      <hr />
      <br />

      <h1 id="applications" class="page-header">Applications</h1>

      <div class="api-item">
        <h2 id="list-applications">List Applications</h2>
        <h3><span class="text-success">GET</span> /api/apps</h3>
        <p class="lead">Returns a list of all applications present on the system and their status, as well as applications available but not yet installed.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/apps
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of application detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
    "apps": [
        {
            "id": "wallabag",
            "name": "Wallabag",
            ...
        },
        {
            "id": "wordpress",
            "name": "Wordpress",
            ...
        }
    ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-application-details">Get Application Details</h2>
        <h3><span class="text-success">GET</span> /api/apps/:id</h3>
        <p class="lead">Returns details on the specified application.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/apps/wordpress
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Application detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
// see app dev documentation for field explanations
{
  "app": {
    "app_author": "Automattic",
    "app_homepage": "https://wordpress.org",
    "assets": {
      "logo": 31,
      "screens": [
        32,
        33,
        34,
        35
      ]
    },
    "author": "arkOS",
    "categories": [
      {
        "primary": "Websites",
        "secondary": [
          "Blogs",
          "Websites",
          "CMS"
        ]
      }
    ],
    "database_engines": [
      "db-mariadb"
    ],
    "dependencies": [
      {
        "binary": null,
        "name": "php",
        "package": "php",
        "type": "system"
      },
      {
        "binary": null,
        "name": "PHP xCache",
        "package": "php-xcache",
        "type": "system"
      },
      {
        "name": "MariaDB",
        "package": "db-mariadb",
        "type": "app"
      }
    ],
    "description": {
      "long": "WordPress started as just a blogging system, but has evolved to be used as full content management system and so much more through the thousands of plugins, widgets, and themes, WordPress is limited only by your imagination. (And tech chops.)",
      "short": "Open-source CMS and blogging platform"
    },
    "download_url": "https://wordpress.org/wordpress-4.1.1.tar.gz",
    "error": "",
    "generation": 1,
    "homepage": "https://arkos.io",
    "icon": "fa fa-wordpress",
    "id": "wordpress",
    "installed": true,
    "is_ready": true,
    "loadable": true,
    "logo": true,
    "modules": [
      "website",
      "backup"
    ],
    "name": "WordPress",
    "screenshots": [
      "screen-1.jpg",
      "screen-2.jpg",
      "screen-3.jpg",
      "screen-4.jpg"
    ],
    "services": [
      {
        "binary": "mysqld",
        "name": "MariaDB",
        "ports": []
      },
      {
        "binary": "php-fpm",
        "name": "PHP FastCGI",
        "ports": []
      }
    ],
    "type": "website",
    "upgradable": "",
    "uses_php": true,
    "uses_ssl": true,
    "version": "4.1.1-1",
    "website_updates": false
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="modify-application">Modify Application</h2>
        <h3><span class="text-success">PUT</span> /api/apps/:id</h3>
        <p class="lead">Installs or removes an application.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X PUT <url>/api/apps/wordpress --data '{"app": {"operation": "install"}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <dl>
            <dt>operation</dt>
            <dd>The operation to perform: either <code>install</code> or <code>uninstall</code>.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>Application detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-application-logo">Get Application Logo</h2>
        <h3><span class="text-success">GET</span> /api/apps/logo/:id</h3>
        <p class="lead">Get the application logo provided with the application.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl <url>/api/apps/logo/wordpress
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Raw application logo image (usually a PNG file).</p>
      </div>
      <hr />
      <br />

      <h1 id="backups" class="page-header">Backups</h1>

      <div class="api-item">
        <h2 id="list-backups">List Backups</h2>
        <h3><span class="text-success">GET</span> /api/backups</h3>
        <p class="lead">Returns a list of created backup archives available in the server's designated storage location.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/backups
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of backup detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
    "apps": [
        {
            "icon": "fa fa-globe",
            "id": "testghost/20150317124530",
            ...
        },
        {
            "icon": "fa fa-wordpress",
            "id": "testpress/20150317102919",
            ...
        },
    ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-backup-details">Get Backup Details</h2>
        <h3><span class="text-success">GET</span> /api/backups/:id</h3>
        <p class="lead">Returns details on the specified backup archive.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Backup ID, composed from the application ID, a slash, and the timestamp.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/backups/testghost/20150317124530
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Backup detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "backup": [
    {
      "icon": "fa fa-globe",                // string - icon class
      "id": "testghost/20150317124530",     // string - unique identifier (name/datestamp)
      "is_ready": true,                     // boolean - genesis use only
      "path": "/var/lib/arkos/backups/testghost/testghost-20150317124530.tar.gz",
      "pid": "testghost",                   // string - id of app or site name
      "site_type": "ghost",                 // string - site type (if for a website)
      "size": 14612219,                     // integer - backup size in bytes
      "time": "2015-03-17T12:45:30-04:00",  // string - time of backup in ISO-8601 format
      "type": "site",                       // string - backup type (site, app, internal)
      "version": "0.5.10-1"                 // string - version of app/site at time of backup
    }
  ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="create-backup">Create Backup</h2>
        <h3><span class="text-success">POST</span> /api/backups/:id</h3>
        <p class="lead">Adds a backup for the specified application ID type.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Application ID or existing website ID to create the backup for.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X POST <url>/api/backups/wordpress
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>HTTP 201, with Location header specifying Job endpoint to track.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="restore-backup">Restore Backup</h2>
        <h3><span class="text-success">PUT</span> /api/backups/:id</h3>
        <p class="lead">Restores an existing backup.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Backup ID, composed from the application ID, a slash, and the timestamp.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X PUT <url>/api/backups/testghost/20150317124530 --data '{"backup": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>A backup detail object with at least the following parameters:</em>
        <dl>
            <dt>pid</dt>
            <dd>The application ID or existing website ID that the backup was created from.</dd>
            <dt>type</dt>
            <dd>Either <code>app</code> or <code>site</code>.</dd>
            <dt>site_type</dt>
            <dd>The application ID of the website type that the backup was created for. <em>(Only if type == "site").</em></dd>
            <dt>icon</dt>
            <dd>Icon font class of the website type that the backup was created for. <em>(Only if type == "site").</em></dd>
        </dl>

        <h4>Responds With</h4>
        <p>HTTP 201, with Location header specifying Job endpoint to track.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="delete-backup">Delete Backup</h2>
        <h3><span class="text-success">DELETE</span> /api/backups/:id</h3>
        <p class="lead">Deletes an existing backup from the storage location.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Backup ID, composed from the application ID, a slash, and the timestamp.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X DELETE <url>/api/backups/testghost/20150317124530
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>HTTP 204.</p>
      </div>
      <hr />
      <br />

      <h1 id="certificates" class="page-header">Certificates</h1>

      <div class="api-item">
        <h2 id="list-certificates">List Certificates</h2>
        <h3><span class="text-success">GET</span> /api/certs</h3>
        <p class="lead">Returns a list of SSL/TLS certificates present on the system.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/certs
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of SSL/TLS certificate detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
    "certs": [
        {
            "assigns": [],
            "domain": "secure.testdomain.xyz",
            "expiry": "2017-02-03T22:32:22",
            ...
        },
        {
            "assigns": [],
            "domain": "*.mydomain.net",
            "expiry": "2017-02-03T22:32:22",
            ...
        }
    ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-certificate-details">Get Certificate Details</h2>
        <h3><span class="text-success">GET</span> /api/certs/:id</h3>
        <p class="lead">Returns details on the specified SSL/TLS certificate.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Certificate name/ID.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/certs/testcert
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Certificate detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "cert": {
    "assigns": [],                      // array - items the cert is assigned to
    "domain": "secure.testdomain.xyz",  // string - address cert is valid for
    "expiry": "2017-02-03T22:32:22",    // string - expiry date in ISO-8601 format
    "id": "testcert",                   // string - unique identifier (name)
    "is_ready": true,                   // boolean - genesis use only
    "keylength": 4096,                  // integer - keylength in bits
    "keytype": "RSA",                   // string - key type (RSA, DSA)
    "md5": "0E:EB:5D:D4:65:15:28:AC:02:31:94:BE:22:74:6C:D8",
    "sha1": "F6:B8:6E:1C:99:42:82:6E:2A:A8:B1:AB:58:8D:F2:E7:43:3E:29:C2"
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="generate-certificate">Generate Certificate</h2>
        <h3><span class="text-success">POST</span> /api/certs</h3>
        <p class="lead">Instructs the server to generate a self-signed SSL/TLS certificate.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X POST <url>/api/certs --data '{"cert": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>An object with at least the following parameters:</em>
        <dl>
            <dt>id</dt>
            <dd>The ID (name) for the new certificate.</dd>
            <dt>domain</dt>
            <dd>Domain ID that the certificate is to be valid for.</dd>
            <dt>country</dt>
            <dd>ISO-3166 (two-letter) country code abbreviation for certificate metadata.</dd>
            <dt>state</dt>
            <dd>State, province or region for certificate metadata.</dd>
            <dt>locale</dt>
            <dd>City, town or locale for certificate metadata.</dd>
            <dt>email</dt>
            <dd>Email address for certificate metadata.</dd>
            <dt>keytype</dt>
            <dd>Type of key to generate with the certificate. Can be <code>rsa</code> or <code>dsa</code>.</dd>
            <dt>keylength</dt>
            <dd>Bit-length of key to generate with the certificate.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>HTTP 201, with Location header specifying Job endpoint to track.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="upload-certificate">Upload Certificate</h2>
        <h3><span class="text-success">POST</span> /api/certs</h3>
        <p class="lead">Adds an externally-sourced SSL/TLS certificate to the server via an upload from the client.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X POST <url>/api/certs --form 'id=certname;file[0]=@certfile.pem;file[1]=@keyfile.key'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>A multipart form submission with the following items:</em>
        <dl>
            <dt>id</dt>
            <dd>The ID (name) for the new certificate.</dd>
            <dt>file[0]</dt>
            <dd>The certificate file in PEM format.</dd>
            <dt>file[1]</dt>
            <dd>The non-encrypted key file.</dd>
            <dt>file[2]</dt>
            <dd>The certificate chain file to append in PEM format. <em>Optional.</em></dd>
        </dl>

        <h4>Responds With</h4>
        <p>HTTP 201, with Location header specifying Job endpoint to track.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="assign-certificate">Assign Certificate</h2>
        <h3><span class="text-success">PUT</span> /api/certs/:id</h3>
        <p class="lead">Assign/unassign the specified certificate to/from a service or website.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Certificate name/ID.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X PUT <url>/api/certs/testcert --data '{"cert": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>A certificate detail object with at least the following items:</em>
        <dl>
            <dt>assigns</dt>
            <dd>A list of qualified assign objects. Assign objects present here that were not on the object prior will have SSL enabled on their corresponding service/website. Conversely, assigns missing from this list will have SSL disabled if the certificate was assigned to them prior.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>Certificate detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="delete-certificate">Delete Certificate</h2>
        <h3><span class="text-success">DELETE</span> /api/certs/:id</h3>
        <p class="lead">Deletes an existing SSL/TLS certificate from the server.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Certificate name/ID.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X DELETE <url>/api/certs/testcert
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>HTTP 204.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="list-certificate-authorities">List Certificate Authorities</h2>
        <h3><span class="text-success">GET</span> /api/certauths</h3>
        <p class="lead">Returns a list of SSL/TLS certificate authorities generated by the server to handle self-signed certificates.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/certauths
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of SSL/TLS certificate authority detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "certauths": [
    {
      "expiry": "2020-02-02T22:58:03",
      "id": "testdomain.xyz"
    },
    {
      "expiry": "2020-02-02T22:58:03",
      "id": "mydomain.net"
    }
  ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-certificate-authority-details">Get Certificate Authority Details</h2>
        <h3><span class="text-success">GET</span> /api/certauths/:id</h3>
        <p class="lead">Returns details on the specified SSL/TLS certificate authority.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Certificate authority name/ID (i.e., the domain it is effective for).</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/certauths/testdomain.xyz
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Certificate authority detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "certauth": {
    "expiry": "2020-02-02T22:58:03",  // string - expiry date in ISO-8601 format
    "id": "testdomain.xyz"            // string - unique identifier (domain name)
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="download-certificate-authority">Download Certificate Authority</h2>
        <h3><span class="text-success">GET</span> /api/certauths/:id?download=true</h3>
        <p class="lead">Downloads the certificate authority X509 file.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl <url>/api/certauths/testdomain.xyz?download=true
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Raw certificate file in PEM format.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="delete-certificate-authority">Delete Certificate Authority</h2>
        <h3><span class="text-success">DELETE</span> /api/certauths/:id</h3>
        <p class="lead">Deletes a SSL/TLS certificate authority from the server.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Certificate authority name/ID (i.e., the domain it is effective for).</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X DELETE <url>/api/certauths/testdomain.xyz
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>HTTP 204.</p>
      </div>
      <hr />
      <br />

      <h1 id="configuration" class="page-header">Configuration</h1>

      <div class="api-item">
        <h2 id="get-arkos-configuration">Get arkOS Configuration</h2>
        <h3><span class="text-success">GET</span> /api/config</h3>
        <p class="lead">Returns the arkOS configuration file, usually located at <code>/etc/arkos/settings.json</code>.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/config
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>arkOS configuration as JSON object, as well as system hostname and timezone settings.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "config": {
    "apps": {
      "app_dir": "/var/lib/arkos/applications",
      "purge": true
    },
    "backups": {
      "driver": "filesystem",
      "location": "/var/lib/arkos/backups"
    },
    ...
  },
  "hostname": "arkosdev",
  "timezone": {
    "region": "America",
    "zone": "Montreal"
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="update-arkos-configuration">Update arkOS Configuration</h2>
        <h3><span class="text-success">PUT</span> /api/config</h3>
        <p class="lead">Replace entire arkOS configuration with a JSON object you provide.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X PUT <url>/api/config --data '{"config": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>A JSON object in proper arkOS configuration format.</em>

        <h4>Responds With</h4>
        <p>arkOS configuration after the changes, as if called via GET.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="patch-arkos-configuration">Patch arkOS Configuration</h2>
        <h3><span class="text-success">PATCH</span> /api/config</h3>
        <p class="lead">Change individual values on the arkOS system configuration.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X PATCH <url>/api/config --data '{"config": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>A JSON object with the sections, keys and values of the arkOS configuration that you want to change.</em>

        <h4>Responds With</h4>
        <p>arkOS configuration after the changes, as if called via GET.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-arkos-system-time">Get arkOS System Time</h2>
        <h3><span class="text-success">GET</span> /api/config/datetime</h3>
        <p class="lead">Get the current arkOS system time and NTP offset.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/config/datetime
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>arkOS system time in ISO-8601 format and NTP offset in seconds.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "datetime": {
    "datetime": "2015-05-30T12:07:26.270941-04:00",   // string - ISO-8601 format
    "offset": 0.2051558494567871                      // float - seconds
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="update-arkos-system-time">Update arkOS System Time</h2>
        <h3><span class="text-success">PUT</span> /api/config/systemtime</h3>
        <p class="lead">Tell arkOS to update its system time via its default NTP server.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X PUT <url>/api/config/systemtime
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>System time and offset after the update, as if called via GET.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="shutdown-system">Shutdown System</h2>
        <h3><span class="text-success">POST</span> /api/config/shutdown</h3>
        <p class="lead">Tell arkOS to immediately shut down.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X POST <url>/api/config/shutdown
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="reboot-system">Reboot System</h2>
        <h3><span class="text-success">POST</span> /api/config/reboot</h3>
        <p class="lead">Tell arkOS to immediately reboot.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X POST <url>/api/config/reboot
        {% endhighlight %}
      </div>
      <hr />
      <br />

      <h1 id="databases" class="page-header">Databases</h1>

      <div class="api-item">
        <h2 id="get-databases">Get Databases</h2>
        <h3><span class="text-success">GET</span> /api/databases</h3>
        <p class="lead">Get all databases registered with arkOS on the system.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/databases
        {% endhighlight %}

        <h4>Optional URL Parameters</h4>
        <dl>
            <dt>rescan</dt>
            <dd>If true, force a server-side rescan of system databases.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>List of database detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "databases": [
    {
      "id": "testdb",
      "is_ready": true,
      "size": 0,
      "type_id": "db-sqlite3",
      "type_name": "SQLite3"
    },
    ...
  ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-database-details">Get Database Details</h2>
        <h3><span class="text-success">GET</span> /api/databases/:id</h3>
        <p class="lead">Returns details on the specified database.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Database name/ID.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/databases/testlite
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Database detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "database": {
    "id": "testdb",            // string - unique identifier (name)
    "is_ready": true,          // boolean - genesis use only
    "size": 0,                 // integer - size of the database on disk in bytes
    "type_id": "db-sqlite3",   // string - database type id for this user
    "type_name": "SQLite3"     // string - pretty database type name
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="create-database">Create Database</h2>
        <h3><span class="text-success">POST</span> /api/databases</h3>
        <p class="lead">Add a new database to the system.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X POST <url>/api/databases --data '{"database": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>An object with at least the following parameters:</em>
        <dl>
            <dt>id</dt>
            <dd>The ID (name) for the new database.</dd>
            <dt>type_id</dt>
            <dd>The ID of the database type (see database type methods below).</dd>
        </dl>

        <h4>Responds With</h4>
        <p>Database detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="execute-sql-on-database">Execute SQL on Database</h2>
        <h3><span class="text-success">PUT</span> /api/databases/:id</h3>
        <p class="lead">Execute provided SQL code on a database of your choice.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X PUT <url>/api/databases/testdb --data '{"database": {...}}'
        {% endhighlight %}

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Database user name/ID.</dd>
        </dl>

        <h4>Request Requires</h4>
        <em>An object with at least the following parameter:</em>
        <dl>
            <dt>execute</dt>
            <dd>A string of properly formatted SQL code to execute.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>A JSON object with two keys: <code>id</code> with the ID of the database, and <code>result</code>, a string of the result text taken from the database engine.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="download-database">Download Database</h2>
        <h3><span class="text-success">GET</span> /api/databases/:id?download=true</h3>
        <p class="lead">Dumps the database to a SQL file and downloads.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl <url>/api/databases/testdb?download=true
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Raw database file in SQL format.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="delete-database">Delete Database</h2>
        <h3><span class="text-success">DELETE</span> /api/databases/:id</h3>
        <p class="lead">Deletes a database from the server.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Database name/ID.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X DELETE <url>/api/databases/testdb
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>HTTP 204.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-database-users">Get Database Users</h2>
        <h3><span class="text-success">GET</span> /api/database_users</h3>
        <p class="lead">Get all database users registered with arkOS on the system. Only applicable for database engines like MariaDB that feature user management.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/database_users
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of database user detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "database_users": [
    {
      "id": "testuser",
      "is_ready": true,
      "permissions": "GRANT USAGE ON *.* TO 'testuser'@'localhost'\n",
      "type_id": "db-mariadb",
      "type_name": "MariaDB"
    },
    ...
  ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-database-user-details">Get Database User Details</h2>
        <h3><span class="text-success">GET</span> /api/database_users/:id</h3>
        <p class="lead">Returns details on the specified database user.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Database user name/ID.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/database_users/testuser
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Database user detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "database_user": {
    "id": "testuser",         // string - unique identifier
    "is_ready": true,         // boolean - genesis use only
    "permissions": "GRANT USAGE ON *.* TO 'testuser'@'localhost'\n",
    "type_id": "db-mariadb",  // string - database type id for this user
    "type_name": "MariaDB"    // string - pretty database type name
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="create-database-user">Create Database User</h2>
        <h3><span class="text-success">POST</span> /api/database_users</h3>
        <p class="lead">Add a new database user to the system.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X POST <url>/api/database_users --data '{"database_user": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>An object with at least the following parameters:</em>
        <dl>
            <dt>id</dt>
            <dd>The ID (name) for the new database user.</dd>
            <dt>type</dt>
            <dd>The ID of the database type (see database type methods below).</dd>
            <dt>passwd</dt>
            <dd>Password for the new database user.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>Database user detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="change-database-user-permissions">Change Database User Permissions</h2>
        <h3><span class="text-success">PUT</span> /api/database_users/:id</h3>
        <p class="lead">GRANT or REVOKE access for a database user to specific databases.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X PUT <url>/api/database_users/testuser --data '{"database_user": {...}}'
        {% endhighlight %}

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Database user name/ID.</dd>
        </dl>

        <h4>Request Requires</h4>
        <em>An object with at least the following parameter:</em>
        <dl>
            <dt>operation</dt>
            <dd><code>check</code> to obtain a list of all GRANTs, <code>grant</code> to GRANT ALL to a database, or <code>revoke</code> to REVOKE ALL on a database.</dd>
            <dt>database</dt>
            <dd>The ID of the database to perform this operation with.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>Database user detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="delete-database-user">Delete Database User</h2>
        <h3><span class="text-success">DELETE</span> /api/database_users/:id</h3>
        <p class="lead">Deletes a database user from the server.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Database user name/ID.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X DELETE <url>/api/database_users/testuser
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>HTTP 204.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-database-types">Get Database Types</h2>
        <h3><span class="text-success">GET</span> /api/database_types</h3>
        <p class="lead">Get all available database engines installed in arkOS, as well as their running status.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/database_types
        {% endhighlight %}

        <h4>Optional URL Parameters</h4>
        <dl>
            <dt>rescan</dt>
            <dd>If true, force a server-side rescan of database engines.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>List of database type detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "database_types": [
    {
      "id": "db-sqlite3",       // string - unique identifier
      "name": "SQLite3",        // string - pretty name
      "state": true,            // boolean - true if engine is running/available
      "supports_users": false   // boolean - true if this type uses users
    },
    {
      "id": "db-mariadb",
      "name": "MariaDB",
      "state": true,
      "supports_users": true
    }
  ]
}
        {% endhighlight %}
      </div>
      <hr />
      <br />

      <h1 id="file-manager" class="page-header">File Manager</h1>

      <div class="api-item">
        <h2 id="list-files-and-folders">List Files and Folders</h2>
        <h3><span class="text-success">GET</span> /api/files/:path</h3>
        <p class="lead">Get all databases registered with arkOS on the system.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/files/Lw**
        {% endhighlight %}

        <h4>Parameters</h4>
        <dl>
            <dt>path</dt>
            <dd>Base64-encoded safe string of an absolute path on the filesystem to look inside.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>List of file detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "files": [
    {
      "binary": false,
      "folder": true,
      "group": "root",
      "hidden": false,
      "icon": "fa-folder-o",
      "id": "L3Zhcg**",
      "mimetype": null,
      "name": "var",
      ...
    },
    {
      "binary": false,
      "folder": true,
      "group": "root",
      "hidden": false,
      "icon": "fa-folder-o",
      "id": "L3Nydg**",
      "mimetype": null,
      "name": "srv",
      ...
  ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-file-details">Get File/Folder Details</h2>
        <h3><span class="text-success">GET</span> /api/files/:path</h3>
        <p class="lead">Returns details on the specified system file or folder.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>path</dt>
            <dd>Base64-encoded safe string of an absolute path on the filesystem.</dd>
        </dl>

        <h4>Optional URL Parameters</h4>
        <dl>
            <dt>content</dt>
            <dd>If true and the path points to a text file, the call also returns the contents of the file.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/files/L2xpYjY0
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>File/folder detail object. If <code>content</code> is true, also returns a key named <code>content</code> containing text file contents.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "file": {
      "binary": false,          // boolean - true if file can't be opened in notepad
      "folder": true,           // boolean - true if folder, false if file
      "group": "root",          // string - group owner
      "hidden": false,          // boolean - true if file name starts with "."
      "icon": "fa-link",        // string - fontawesome icon class
      "id": "L2xpYjY0",         // string - unique identifier (base64-encoded path)
      "mimetype": null,         // string - mimetype of file (null if folder or unknown)
      "name": "lib64",          // string - base filename
      "path": "/lib64",         // path - fully-expanded path to item on disk
      "perms": {
        "oct": "0777",          // string - octal permission bits
        "str": "rwxrwxrwx"      // string - visual representation of permissions
      },
      "realpath": "/usr/lib",   // path - if item is symlink, the path it points to
      "selected": false,        // boolean - genesis use only
      "size": 7,                // integer - size of item in bytes
      "type": "link",           // string - item type (folder, link, file, etc)
      "user": "root"            // string - user owner
    }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="create-file">Create File or Folder</h2>
        <h3><span class="text-success">POST</span> /api/files/:path</h3>
        <p class="lead">Adds a new file or folder inside the specified path. Path must be a folder.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X POST <url>/api/files/Lw** --data '{"file": {...}}'
        {% endhighlight %}

        <h4>Parameters</h4>
        <dl>
            <dt>path</dt>
            <dd>Base64-encoded safe string of an absolute path on the filesystem to create inside.</dd>
        </dl>

        <h4>Request Requires</h4>
        <em>An object with at least the following parameters:</em>
        <dl>
            <dt>folder</dt>
            <dd>True or False depending if you want the new item to be a folder or a regular file.</dd>
            <dt>name</dt>
            <dd>The name of the file or folder to create.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>File/folder detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="upload-file">Upload File</h2>
        <h3><span class="text-success">POST</span> /api/files/:path</h3>
        <p class="lead">Uploads file(s) of your choice to the specified path. Path must be a folder.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X POST <url>/api/files/Lw** --form 'file[0]=@filename.txt;file[1]=@secondfile.zip;...'
        {% endhighlight %}

        <h4>Parameters</h4>
        <dl>
            <dt>path</dt>
            <dd>Base64-encoded safe string of an absolute path on the filesystem to create inside.</dd>
        </dl>

        <h4>Request Requires</h4>
        <em>A multipart form submission with the following items:</em>
        <dl>
            <dt>file[0]</dt>
            <dd>The first file to upload.</dd>
            <dt>file[1]</dt>
            <dd>Optional subsequent files to upload, with the array index increased each time.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>File/folder detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="manage-file">Manage File</h2>
        <h3><span class="text-success">PUT</span> /api/files/:path</h3>
        <p class="lead">Performs one of a variety of actions on a file/folder.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X PUT <url>/api/files/Lw** --data '{"file": {...}}'
        {% endhighlight %}

        <h4>Parameters</h4>
        <dl>
            <dt>path</dt>
            <dd>Base64-encoded safe string of an absolute path on the filesystem to manage.</dd>
        </dl>

        <h4>Request Requires</h4>
        <em>A multipart form submission with the following items:</em>
        <dl>
            <dt>operation</dt>
            <dd>One of: <code>copy</code>, <code>rename</code>, <code>edit</code>, <code>extract</code>, or <code>props</code>.</dd>
            <dt>newdir</dt>
            <dd>(if copy) The new directory the file should be copied to.</dd>
            <dt>name</dt>
            <dd>(if copy or rename) The name of the file to be created, or the new name of the file to rename to.</dd>
            <dt>data</dt>
            <dd>(if edit) The contents of the file to overwrite with.</dd>
            <dt>user (and/or) group</dt>
            <dd>(if props) The user and/or group to change ownership to.</dd>
            <dt>perms['oct']</dt>
            <dd>(if props) Permissions in octal format that the file should have.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>File/folder detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="delete-file">Delete File</h2>
        <h3><span class="text-success">DELETE</span> /api/files/:path</h3>
        <p class="lead">Deletes a file/folder from the filesystem.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X DELETE <url>/api/files/Lw**
        {% endhighlight %}

        <h4>Parameters</h4>
        <dl>
            <dt>path</dt>
            <dd>Base64-encoded safe string of an absolute path on the filesystem to delete.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>HTTP 204.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-fileshare-links">Get Fileshare Links</h2>
        <h3><span class="text-success">GET</span> /api/shares</h3>
        <p class="lead">Get all fileshare links created and currently authorized.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/shares
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of fileshare link detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "shares": [
    {
      "expires": true,
      "expires_at": "2015-08-30T20:46:15+00:00",
      "fetch_count": 0,
      "id": "4d4fa3117ab4df19489ac2e19e7d7003d219cb26",
      "path": "/etc/nginx/nginx.conf"
    },
    ...
  ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-fileshare-link-details">Get Fileshare Link Details</h2>
        <h3><span class="text-success">GET</span> /api/shares/:id</h3>
        <p class="lead">Returns details on the specified fileshare link.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Filesystem name/ID.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/shares/4d4fa3117ab4df19489ac2e19e7d7003d219cb26
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Fileshare link detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "share": {
    "expires": true,
    "expires_at": "2015-08-30T20:46:15+00:00",
    "fetch_count": 0,
    "id": "4d4fa3117ab4df19489ac2e19e7d7003d219cb26",
    "path": "/etc/nginx/nginx.conf"
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="create-fileshare-link">Create Fileshare Link</h2>
        <h3><span class="text-success">POST</span> /api/shares</h3>
        <p class="lead">Create a link to share a downloadable file with someone.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X POST <url>/api/shares --data '{"share": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>An object with at least the following parameters:</em>
        <dl>
            <dt>path</dt>
            <dd>The path, accessible on the server, of the file/folder to share.</dd>
            <dt>expires</dt>
            <dd>(optional) Time since the epoch (Unix time) of when the link should expire and no longer be accessible. Default is 0, meaning it expires after the first download.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>Fileshare link detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="download-shared-file">Download Shared File</h2>
        <h3><span class="text-success">GET</span> /shared/:id</h3>
        <p class="lead">Initiates a download of a shared file.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Fileshare link name/ID.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        wget <url>/shared/4d4fa3117ab4df19489ac2e19e7d7003d219cb26
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Raw file contents.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="update-fileshare-link">Update Fileshare Link</h2>
        <h3><span class="text-success">PUT</span> /api/shares/:id</h3>
        <p class="lead">Change the expiry of an existing and non-expired fileshare link.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X PUT <url>/api/shares/4d4fa3117ab4df19489ac2e19e7d7003d219cb26 --data '{"share": {...}}'
        {% endhighlight %}

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Fileshare link name/ID.</dd>
        </dl>

        <h4>Request Requires</h4>
        <em>An object with at least the following parameters:</em>
        <dl>
            <dt>expires</dt>
            <dd>Time since the epoch (Unix time) of when the link should expire and no longer be accessible. A value of 0 means the link will expire after the first download.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>Fileshare link detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="remove-fileshare-link">Remove Fileshare Link</h2>
        <h3><span class="text-success">DELETE</span> /api/shares/:id</h3>
        <p class="lead">Instantly expire a fileshare link, removing the possibility to download the file.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X DELETE <url>/api/shares/4d4fa3117ab4df19489ac2e19e7d7003d219cb26
        {% endhighlight %}

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Fileshare link name/ID.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>HTTP 204.</p>
      </div>
      <hr />
      <br />

      <h1 id="filesystems" class="page-header">Filesystems</h1>

      <div class="api-item">
        <h2 id="get-filesystems">Get Filesystems</h2>
        <h3><span class="text-success">GET</span> /api/system/filesystems</h3>
        <p class="lead">Get all filesystems (physical and virtual) registered with arkOS on the system.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/filesystems
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of filesystem detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "filesystems": [
    {
      "crypt": false,
      "enabled": true,
      "fstype": "ext4",
      "id": "sda1",
      "is_ready": true,
      "mountpoint": "/",
      "path": "/dev/sda1",
      "size": 8588886016,
      "type": "physical"
    },
    ...
  ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-filesystem-details">Get Filesystem Details</h2>
        <h3><span class="text-success">GET</span> /api/system/filesystems/:id</h3>
        <p class="lead">Returns details on the specified filesystem.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Filesystem name/ID.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/filesystems/sda1
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Filesystem detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "filesystem": {
    "crypt": false,       // boolean - true if encrypted FS
    "enabled": true,      // boolean - true if loaded on boot
    "fstype": "ext4",     // string - filesystem type (ext4, ntfs, etc)
    "id": "sda1",         // string - unique identifier
    "is_ready": true,     // boolean - genesis use only
    "mountpoint": "/",    // path - directory fs is mounted on, null if not mounted
    "path": "/dev/sda1",  // path - path to fs device or image file
    "size": 8588886016,   // integer - disk size in bytes
    "type": "physical"    // string - 'physical' or 'virtual'
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="create-virtual-disk">Create Virtual Disk</h2>
        <h3><span class="text-success">POST</span> /api/system/filesystems</h3>
        <p class="lead">Create a new virtual disk image file.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X POST <url>/api/system/filesystems --data '{"filesystem": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>An object with at least the following parameters:</em>
        <dl>
            <dt>id</dt>
            <dd>The ID (name) for the new virtual disk.</dd>
            <dt>size</dt>
            <dd>Size of the new disk in bytes.</dd>
            <dt>crypt</dt>
            <dd>True if the virtual disk should be encrypted after creation..</dd>
            <dt>passwd</dt>
            <dd>Password to encrypt disk with. Required if crypt is true.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>HTTP 201, with Location header specifying Job endpoint to track.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="filesystem-operations">Filesystem Operations</h2>
        <h3><span class="text-success">PUT</span> /api/system/filesystems/:id</h3>
        <p class="lead">Perform a specific operation on a filesystem.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Filesystem name/ID.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X PUT <url>/api/system/filesystems/testdisk --data '{"filesystem": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <dl>
            <dt>operation</dt>
            <dd>One of the following operations to perform: <code>mount</code>, <code>umount</code>, <code>enable</code> mount on boot, <code>disable</code> mount on boot.</dd>
            <dt>passwd</dt>
            <dd>Required if <code>mount</code> operation specified on an encrypted filesystem.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>Filesystem detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="delete-virtual-disk">Delete Virtual Disk</h2>
        <h3><span class="text-success">DELETE</span> /api/system/filesystems/:id</h3>
        <p class="lead">Deletes a virtual disk from the server. Has no effect on physical disks.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Filesystem name/ID.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X DELETE <url>/api/system/filesystems/testdisk
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>HTTP 204.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-points-of-interest">Get Points of Interest</h2>
        <h3><span class="text-success">GET</span> /api/points</h3>
        <p class="lead">Get paths of interest (website data directories, filesystem mount points, etc) registered with arkOS on the system.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/points
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of point of interest detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "points": [
    {
      "icon": "fa-hdd-o",           // string - fontawesome icon class
      "id": "testcrypt",            // string - unique identifier (name)
      "path": "/media/testcrypt",   // path - mountpoint or data directory
      "type": "crypt"               // string - type of item (website, disk, crypt, etc)
    },
    ...
  ]
}
        {% endhighlight %}
      </div>
      <hr />
      <br />

      <h1 id="networks" class="page-header">Networks</h1>

      <div class="api-item">
        <h2 id="get-networks">Get Networks</h2>
        <h3><span class="text-success">GET</span> /api/system/networks</h3>
        <p class="lead">Get all networks registered on the system.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/networks
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of network detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "networks": [
    {
      "config": {
        "connection": "ethernet",
        "description": "'A basic dhcp ethernet connection'",
        "interface": "enp0s3",
        "ip": "dhcp"
      },
      "connected": true,
      "enabled": true,
      "id": "etherwow",
      "is_ready": true
    },
    ...
  ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-network-details">Get Network Details</h2>
        <h3><span class="text-success">GET</span> /api/system/networks/:id</h3>
        <p class="lead">Returns details on the specified network.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Network name/ID.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/networks/etherwow
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Network detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "network": {
    "config": {           // hash - list of lines in netctl config
      "connection": "ethernet",
      "description": "'A basic dhcp ethernet connection'",
      "interface": "enp0s3",
      "ip": "dhcp"
    },
    "connected": true,    // boolean - is system connected to this network
    "enabled": true,      // boolean - is network started on boot
    "id": "etherwow",     // string - unique identifier (name)
    "is_ready": true      // boolean - genesis use only
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="add-network">Add Network</h2>
        <h3><span class="text-success">POST</span> /api/system/networks</h3>
        <p class="lead">Add a new network configuration.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X POST <url>/api/system/networks --data '{"network": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>A network detail object with at least the following parameters:</em>
        <dl>
            <dt>id</dt>
            <dd>The ID (name) for the new network.</dd>
            <dt>config</dt>
            <dd>An object with netctl properties and values See the Arch Linux netctl definitions for more information.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>Network detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="network-operations">Network Operations</h2>
        <h3><span class="text-success">PUT</span> /api/system/networks/:id</h3>
        <p class="lead">Perform a specific operation on a network.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Network name/ID.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X PUT <url>/api/system/networks/etherwow --data '{"network": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <dl>
            <dt>operation</dt>
            <dd>One of the following operations to perform: <code>connect</code>, <code>disconnect</code>, <code>enable</code> connection on boot, <code>disable</code> connection on boot.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>Network detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="delete-network">Delete Network</h2>
        <h3><span class="text-success">DELETE</span> /api/system/networks/:id</h3>
        <p class="lead">Deletes a network connection configuration from the server.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Network name/ID.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X DELETE <url>/api/system/networks/etherwow
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>HTTP 204.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-network-interfaces">Get Network Interfaces</h2>
        <h3><span class="text-success">GET</span> /api/system/netifaces</h3>
        <p class="lead">Get all network interfaces for the device.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/netifaces
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of network interface detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "netifaces": [
    {
      "id": "lo",
      "ip": [
        {
          "addr": "127.0.0.1",
          "netmask": "255.0.0.0",
          "peer": "127.0.0.1"
        }
      ],
      "rx": 109471,
      "tx": 109471,
      "type": "loopback",
      "up": true
    },
    ...
  ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-network-interface-details">Get Network Interface Details</h2>
        <h3><span class="text-success">GET</span> /api/system/netifaces/:id</h3>
        <p class="lead">Returns details on the specified network interface.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Network interface ID.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/netifaces/enp0s3
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Network interface detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "netiface": {
    "id": "enp0s3",                  // string - interface name
    "ip": [                          // array - ip addresses for this interface
      {
        "addr": "10.0.2.15",         // string - ip address
        "broadcast": "10.0.2.255",   // string - broadcast address
        "netmask": "255.255.255.0"   // string - full netmask
      }
    ],
    "rx": 35388,                     // integer - bytes received since up
    "tx": 46777,                     // integer - bytes sent since up
    "type": "ethernet",              // string - wireless, ethernet, loopback, etc
    "up": true                       // boolean - is the interface up
  }
}
        {% endhighlight %}
      </div>
      <hr />
      <br />

      <h1 id="packages" class="page-header">System Packages</h1>

      <div class="api-item">
        <h2 id="get-packages">Get Packages</h2>
        <h3><span class="text-success">GET</span> /api/system/packages</h3>
        <p class="lead">Get all system packages available or installed.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/packages
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of system package detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "packages": [
    {
      "id": "b43-fwcutter",
      "installed": false,
      "repo": "core",
      "upgradable": false,
      "version": "019-1"
    },
    {
      "id": "bridge-utils",
      "installed": false,
      "repo": "core",
      "upgradable": false,
      "version": "1.5-2"
    },
    ...
  ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-package-details">Get Package Details</h2>
        <h3><span class="text-success">GET</span> /api/system/packages/:id</h3>
        <p class="lead">Returns details on the specified system package.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>System package name.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/packages/arkos-core
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>System package detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "package": {
    "architecture": "any",
    "build_date": "Mon May 11 10:21:41 2015",
    "conflicts_with": "None",
    "depends_on": "binutils  python2  python2-ntplib  python2-passlib  python2-pyopenssl  python2-iptables  python2-nginx  python2-dbus  python2-cryptsetup  python2-pyparted  python2-ldap  python2-psutil  python2-netifaces  python2-gitpython  python2-gnupg  python2-pacman  arkos-openldap  nginx  git  fail2ban  supervisor",
    "description": "Python system management libraries for arkOS",
    "groups": "None",
    "id": "arkos-core",
    "install_date": "Sat Jun 20 10:49:38 2015",
    "install_reason": "Explicitly installed",
    "install_script": "No",
    "installed_size": "656.00 KiB",
    "licenses": "GPLv3",
    "optional_deps": "None",
    "optional_for": "None",
    "packager": "Unknown Packager",
    "provides": "arkos-core",
    "replaces": "None",
    "required_by": "None",
    "upgradable": false,
    "url": "https://arkos.io/",
    "validated_by": "Signature",
    "version": "0.7.0beta3-1"
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="package-operations">Package Operations</h2>
        <h3><span class="text-success">POST</span> /api/system/packages</h3>
        <p class="lead">Perform a specific operation on a system package.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X PUT <url>/api/system/packages --data '{"package": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>An array of objects containing the following, which will be performed in batch:</em>
        <dl>
            <dt>id</dt>
            <dd>System package name.</dd>
            <dt>operation</dt>
            <dd>One of the following operations to perform: <code>install</code> or <code>remove</code>.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>HTTP 201, with Location header specifying Job endpoint to track.</p>
      </div>
      <hr />
      <br />

      <h1 id="roles" class="page-header">Roles</h1>

      <div class="api-item">
        <h2 id="get-users">Get Users</h2>
        <h3><span class="text-success">GET</span> /api/system/users</h3>
        <p class="lead">Get all users registered to the arkOS LDAP service.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/users
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of user detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "users": [
    {
      "admin": true,
      "domain": "testdomain.xyz",
      "first_name": "Jacob",
      "id": 1005,
      "is_ready": true,
      "last_name": "Cook",
      "mail_addresses": [
        "jacob@testdomain.xyz"
      ],
      "name": "jacob",
      "sudo": true
    },
    ...
  ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-user-details">Get User Details</h2>
        <h3><span class="text-success">GET</span> /api/system/users/:id</h3>
        <p class="lead">Returns details on the specified arkOS LDAP user.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>User ID number (uid).</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/users/1005
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>User detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "user": {
    "admin": true,                // boolean - can user use the Kraken API
    "domain": "testdomain.xyz",   // string - domain assigned to user
    "first_name": "Jacob",        // string - user first name or pseudonym
    "id": 1005,                   // integer - user ID number (uid)
    "is_ready": true,             // boolean - genesis use only
    "last_name": "Cook",          // string - user last name or null
    "mail_addresses": [           // array - mail addresses and aliases
      "jacob@testdomain.xyz"
    ],
    "name": "jacob",              // string - username
    "sudo": true                  // boolean - can user execute cmds as sudo
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="add-user">Add User</h2>
        <h3><span class="text-success">POST</span> /api/system/users</h3>
        <p class="lead">Add a new user to arkOS LDAP.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X POST <url>/api/system/users --data '{"user": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>A user detail object with at least the following parameters:</em>
        <dl>
            <dt>name</dt>
            <dd>The username for the new user.</dd>
            <dt>first_name</dt>
            <dd>First name or pseudonym of user.</dd>
            <dt>last_name</dt>
            <dd>Last name of user. Can be left blank.</dd>
            <dt>domain</dt>
            <dd>Domain name (string) of an existing domain on the system to assign to this user.</dd>
            <dt>admin</dt>
            <dd>True if the user should be allowed to manage the system via Genesis or the Kraken API.</dd>
            <dt>sudo</dt>
            <dd>True if the user should be allowed to execute command-line programs as root.</dd>
            <dt>passwd</dt>
            <dd>The user's initial password.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>User detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="update-user">Update User</h2>
        <h3><span class="text-success">PUT</span> /api/system/users/:id</h3>
        <p class="lead">Update details of an arkOS LDAP user.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>User ID number (uid).</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X PUT <url>/api/system/users/1005 --data '{"user": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>A user detail object with at least the following items:</em>
        <dl>
            <dt>first_name</dt>
            <dd>First name or pseudonym of user.</dd>
            <dt>last_name</dt>
            <dd>Last name of user. Can be left blank.</dd>
            <dt>domain</dt>
            <dd>Domain name (string) of an existing domain on the system to assign to this user.</dd>
            <dt>admin</dt>
            <dd>True if the user should be allowed to manage the system via Genesis or the Kraken API.</dd>
            <dt>sudo</dt>
            <dd>True if the user should be allowed to execute command-line programs as root.</dd>
            <dt>mail_addresses</dt>
            <dd>A list of usernames to use as aliases for mail accounts (e.g. if the user's domain is <code>testdomain.xyz</code> and this array contains <code>myaddr</code> an alias of <code>myaddr@testdomain.xyz</code> will be added).</dd>
            <dt>passwd</dt>
            <dd>A new password for the user. Leave blank if you do not want to change the password.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>User detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="delete-user">Delete User</h2>
        <h3><span class="text-success">DELETE</span> /api/system/users/:id</h3>
        <p class="lead">Deletes a user from arkOS LDAP.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>User ID number (uid).</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X DELETE <url>/api/system/users/1005
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>HTTP 204.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-groups">Get Groups</h2>
        <h3><span class="text-success">GET</span> /api/system/groups</h3>
        <p class="lead">Get all groups registered to the arkOS LDAP service.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/groups
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of group detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "groups": [
    {
      "id": 4005,
      "is_ready": true,
      "name": "testgroup",
      "users": [
        "testuser"
      ]
    },
    ...
  ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-group-details">Get Group Details</h2>
        <h3><span class="text-success">GET</span> /api/system/groups/:id</h3>
        <p class="lead">Returns details on the specified arkOS LDAP group.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Group ID number (gid).</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/groups/4005
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Group detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "group": {
    "id": 4005,             // integer - group ID number (gid)
    "is_ready": true,       // boolean - genesis use only
    "name": "testgroup",    // string - group name
    "users": [              // array - member usernames
      "testuser"
    ]
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="add-group">Add Group</h2>
        <h3><span class="text-success">POST</span> /api/system/groups</h3>
        <p class="lead">Add a new group to arkOS LDAP.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X POST <url>/api/system/groups --data '{"group": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>A group detail object with at least the following parameters:</em>
        <dl>
            <dt>name</dt>
            <dd>The name for the new group.</dd>
            <dt>users</dt>
            <dd>A list of usernames to add as members of this group.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>Group detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="update-group">Update Group</h2>
        <h3><span class="text-success">PUT</span> /api/system/groups/:id</h3>
        <p class="lead">Update details of an arkOS LDAP group.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Group ID number (gid).</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X PUT <url>/api/system/groups/4005 --data '{"group": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <dl>
            <dt>users</dt>
            <dd>An array of usernames to set as members of this group.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>Group detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="delete-group">Delete Group</h2>
        <h3><span class="text-success">DELETE</span> /api/system/groups/:id</h3>
        <p class="lead">Deletes a group from arkOS LDAP.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Group ID number (gid).</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X DELETE <url>/api/system/groups/4005
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>HTTP 204.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-domains">Get Domains</h2>
        <h3><span class="text-success">GET</span> /api/system/domains</h3>
        <p class="lead">Get all domains registered to arkOS and its LDAP service.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/domains
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of domain detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "domains": [
    {
      "id": "testdomain.xyz",
      "is_ready": true
    },
    ...
  ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-domain-details">Get Domain Details</h2>
        <h3><span class="text-success">GET</span> /api/system/domains/:id</h3>
        <p class="lead">Returns details on the specified arkOS domain.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Domain name.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/domains/testdomain.xyz
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Domain detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "domain": {
    "id": "testdomain.xyz",   // string - domain name
    "is_ready": true          // boolean - genesis use only
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="add-domain">Add Domain</h2>
        <h3><span class="text-success">POST</span> /api/system/domains</h3>
        <p class="lead">Add a new domain to arkOS LDAP.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X POST <url>/api/system/domains --data '{"domain": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>A domain detail object with at least the following parameters:</em>
        <dl>
            <dt>id</dt>
            <dd>The fully qualified domain name.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>Domain detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="delete-domain">Delete Domain</h2>
        <h3><span class="text-success">DELETE</span> /api/system/domains/:id</h3>
        <p class="lead">Deletes a domain from arkOS.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Domain name.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X DELETE <url>/api/system/domains/testdomain.xyz
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>HTTP 204.</p>
      </div>
      <hr />
      <br />

      <h1 id="security" class="page-header">Security</h1>

      <div class="api-item">
        <h2 id="get-policies">Get Policies</h2>
        <h3><span class="text-success">GET</span> /api/system/policies</h3>
        <p class="lead">Get all firewall policies for installed applications.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/policies
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of firewall policy detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "policies": [
    {
      "icon": "fa fa-refresh",
      "id": "syncthing@syncthing",
      "is_ready": true,
      "name": "File Sync",
      "policy": 2,
      "ports": [
        [
          "tcp",
          22000
        ],
        [
          "udp",
          21025
        ]
      ],
      "type": "syncthing"
    },
    ...
  ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-policy-details">Get Policy Details</h2>
        <h3><span class="text-success">GET</span> /api/system/policies/:id</h3>
        <p class="lead">Returns details on the specified firewall policy.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>id or name of the website/app for which the firewall policy applies.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/policies/arkos
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Firewall policy detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "policy": {
    "icon": "fa fa-desktop",
    "id": "arkos",
    "is_ready": true,
    "name": "System Management (Genesis/APIs)",
    "policy": 2,
    "ports": [
      [
        "tcp",
        8000
      ]
    ],
    "type": "arkos"
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="update-policy">Update Policy</h2>
        <h3><span class="text-success">PUT</span> /api/system/policies/:id</h3>
        <p class="lead">Change firewall rule for an arkOS app or website.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>id or name of the website/app for which the firewall policy applies.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X PUT <url>/api/system/policies/arkos --data '{"policy": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <dl>
            <dt>policy</dt>
            <dd>An integer representing the policy to enact for this app or website. <code>0</code> blocks to all visitors, <code>1</code> allows access on the local network only, and <code>2</code> allows access from all networks.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>Firewall policy detail object.</p>
      </div>
      <hr />
      <br />

      <h1 id="services" class="page-header">System Services</h1>

      <div class="api-item">
        <h2 id="get-services">Get Services</h2>
        <h3><span class="text-success">GET</span> /api/system/services</h3>
        <p class="lead">Get all system services and daemons registered to SystemD or Supervisor.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/services
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of system service detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "services": [
    {
      "cfg": {},
      "enabled": true,
      "id": "arkos-redis",
      "is_ready": true,
      "running": true,
      "state": "running",
      "type": "system"
    },
    {
      "cfg": {},
      "enabled": false,
      "id": "auditd",
      "is_ready": true,
      "running": false,
      "state": "stopped",
      "type": "system"
    },
    ...
  ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-service-details">Get Service Details</h2>
        <h3><span class="text-success">GET</span> /api/system/services/:id</h3>
        <p class="lead">Returns details on the specified system service.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>id or name of the system service (daemon).</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/system/services/arkos-redis
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>System service detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "service": {
    "cfg": {},
    "enabled": true,
    "id": "arkos-redis",
    "is_ready": true,
    "running": true,
    "state": "running",
    "type": "system"
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="create-service">Create Service</h2>
        <h3><span class="text-success">POST</span> /api/system/services</h3>
        <p class="lead">Create a new Supervisor service.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X POST <url>/api/system/services --data '{"service": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>A service detail object with at least the following parameters:</em>
        <dl>
            <dt>id</dt>
            <dd>The name for the new service.</dd>
            <dt>cfg</dt>
            <dd>An object of key/values to be added to the Supervisor configuration (INI).</dd>
        </dl>

        <h4>Responds With</h4>
        <p>Service detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="manage-service">Manage Service</h2>
        <h3><span class="text-success">PUT</span> /api/system/services/:id</h3>
        <p class="lead">Perform an action on a service.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X PUT <url>/api/system/services/php-fpm --data '{"service": {...}}'
        {% endhighlight %}

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>id or name of the service.</dd>
        </dl>

        <h4>Request Requires</h4>
        <em>A service detail object with at least the following parameters:</em>
        <dl>
            <dt>operation</dt>
            <dd>The operation to perform on the service: <code>start</code>, <code>stop</code>, <code>restart</code>, <code>real_restart</code>, <code>enable</code>, or <code>disable</code>.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>Service detail object after state change.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="delete-service">Delete Service</h2>
        <h3><span class="text-success">DELETE</span> /api/system/services/:id</h3>
        <p class="lead">Remove a Supervisor service from the system.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X DELETE <url>/api/system/services/testghost
        {% endhighlight %}

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>id or name of the service.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>HTTP 204.</p>
      </div>
      <hr />
      <br />

      <h1 id="updates" class="page-header">Updates</h1>

      <div class="api-item">
        <h2 id="get-updates">Get Updates</h2>
        <h3><span class="text-success">GET</span> /api/updates</h3>
        <p class="lead">Get updates as available from arkOS central servers.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/updates
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of update detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "updates": [
    {
      "id": 1,
      "name": "Test Update",
      "date": "2015-08-30T20:46:15+00:00",
      "info": "This is a test update for your system.",
      "tasks": {}
    },
    ...
  ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-update-details">Get Update Details</h2>
        <h3><span class="text-success">GET</span> /api/updates/:id</h3>
        <p class="lead">Returns details on the specified system update.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>id of the update.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/updates/1
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Update detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "update": {
    "id": 1,
    "name": "Test Update",
    "date": "2015-08-30T20:46:15+00:00",
    "info": "This is a test update for your system.",
    "tasks": {}
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="apply-updates">Apply Updates</h2>
        <h3><span class="text-success">POST</span> /api/updates</h3>
        <p class="lead">Downloads and enables all updates from arkOS central servers.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X POST <url>/api/updates
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>HTTP 201, with Location header specifying Job endpoint to track.</p>
      </div>
      <hr />
      <br />

      <h1 id="websites" class="page-header">Websites</h1>

      <div class="api-item">
        <h2 id="get-websites">Get Websites</h2>
        <h3><span class="text-success">GET</span> /api/websites</h3>
        <p class="lead">Get all websites created on the system.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/websites
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>List of website detail objects.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "websites": [
    {
      "addr": "localhost",
      "certificate": null,
      "database": null,
      "enabled": true,
      "id": "radicale",
      ...
    },
    {
      "addr": "localhost",
      "certificate": null,
      "database": null,
      "enabled": true,
      "has_actions": null,
      "id": "testpress",
      ...
    }
  ]
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="get-website-details">Get Website Details</h2>
        <h3><span class="text-success">GET</span> /api/websites/:id</h3>
        <p class="lead">Returns details on the specified website.</p>

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Name of the website.</dd>
        </dl>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' <url>/api/websites/testpress
        {% endhighlight %}

        <h4>Responds With</h4>
        <p>Website detail object.</p>

        <h4>Example Response</h4>
        {% highlight json %}
{
  "website": {
    "addr": "localhost",
    "certificate": null,
    "database": null,
    "enabled": true,
    "has_actions": null,
    "id": "testpress",
    "is_ready": true,
    "path": "/srv/http/webapps/testpress",
    "php": true,
    "port": 8765,
    "site_icon": "fa fa-wordpress",
    "site_name": "WordPress",
    "site_type": "wordpress",
    "version": "None"
  }
}
        {% endhighlight %}
      </div>
      <hr />

      <div class="api-item">
        <h2 id="create-website">Create Website</h2>
        <h3><span class="text-success">POST</span> /api/websites</h3>
        <p class="lead">Add a new website to the system.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X POST <url>/api/websites --data '{"website": {...}}'
        {% endhighlight %}

        <h4>Request Requires</h4>
        <em>A website detail object with at least the following parameters:</em>
        <dl>
            <dt>id</dt>
            <dd>The name for the new website.</dd>
            <dt>site_type</dt>
            <dd>The id of the Website Application to use for creating this site.</dd>
            <dt>addr</dt>
            <dd>The address to make this website respond to.</dd>
            <dt>port</dt>
            <dd>The port to make this website respond on.</dd>
            <dt>extra_data</dt>
            <dd>An object with keys/values corresponding to the values required to add a new instance of the specific website type.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>HTTP 201, with Location header specifying Job endpoint to track.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="manage-website">Manage Website</h2>
        <h3><span class="text-success">PUT</span> /api/websites/:id</h3>
        <p class="lead">Edit details of the website, or perform an action on it.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Content-type: application/json' -H 'Authorization: Bearer <token>' -X PUT <url>/api/websites/testpress --data '{"website": {...}}'
        {% endhighlight %}

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Name of the website.</dd>
        </dl>

        <h4>Request Requires</h4>
        <em>A website detail object with at least the following parameters:</em>
        <dl>
            <dt>operation</dt>
            <dd>The operation to perform: <code>enable</code>, <code>disable</code>, <code>enable_ssl</code>, <code>disable_ssl</code>, <code>update</code>. If just editing the website, leave this field blank.</dd>
            <dt>addr</dt>
            <dd>(if editing) The address to make this website respond to.</dd>
            <dt>port</dt>
            <dd>(if editing) The port to make this website respond on.</dd>
            <dt>new_name</dt>
            <dd>(if editing) A new name to rename this site to, if any.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>Website detail object.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="perform-website-action">Perform Website Action</h2>
        <h3><span class="text-success">POST</span> /api/websites/actions/:id/:action</h3>
        <p class="lead">Perform an action on a qualifying website.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X POST <url>/api/websites/testjekyll
        {% endhighlight %}

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Name of the website.</dd>
            <dt>action</dt>
            <dd>The action to perform.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>HTTP 200.</p>
      </div>
      <hr />

      <div class="api-item">
        <h2 id="remove-website">Remove Website</h2>
        <h3><span class="text-success">DELETE</span> /api/websites/:id</h3>
        <p class="lead">Remove a website, its data and associated databases/configurations.</p>

        <h4>Example</h4>
        {% highlight bash %}
        curl -H 'Authorization: Bearer <token>' -X DELETE <url>/api/websites/testpress
        {% endhighlight %}

        <h4>Parameters</h4>
        <dl>
            <dt>id</dt>
            <dd>Name of the website.</dd>
        </dl>

        <h4>Responds With</h4>
        <p>HTTP 201, with Location header specifying Job endpoint to track.</p>
      </div>
    </div>
  </div>
</div>

<script>
    $('body').scrollspy({
        target: '.docs-sidebar',
        offset: 40
    });
</script>
